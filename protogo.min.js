window.Protogo=function(t){var e={};function __webpack_require__(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}return __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,r){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},__webpack_require__.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ChoiTrie=function(){function ChoiTrie(){var t=this;t.CACHING_COUNTING=2,t.node=function(e,r){var i="",n="",s=[],h=[];return r&&(0==e.length?(i+=";",n+="1;"):(i+=e[0],n+=e.length+e),h.push(1),r.constructor===Array?s.push(r):(s.push([]),s[0].push(r))),{C:i,H:n,O:[],I:s,CC:h,length:s.length,length_h:s.length,select:function select(t){return this.C?-1*this.select_c(t):this.H?this.select_h(t):0},select_c:function select_c(t){for(var e=0;e<this.C.length;e++)if(t[0]===this.C[e])return e;return-1},add_C:function add_C(t){var e=this.select_c(t);return-1!=e?(this.cachingIt(e),e):(this.C+=t,this.CC.push(1),this.C.length-1)},add_H:function add_H(t,e){var r=this.select_H(t);if(-1==r){var i=t.length;this.H+=i+t,r=this.length_h,this.length_h++}this.I[r]||(this.I[r]=[]),this.I[r].push(e)},add_O:function add_O(e,r){var i=this.select_c(e[0]);this.O[i]||(this.O[i]={});var n=this.O[i],s=0,h=null;for(var o in n)for(var a=e.length>o.length?o.length:e.length,l=0;l<a&&o[l]==e[l];l++)(null==h||s<=l)&&(s=l,h=o);if(h){if(h.length-1==s)return h;var u=h.substr(0,s+1),f=h.substr(s+1,h.length-s);return n[h].length_h==n[h].length?n[h].pushPostfixToH(f):(n[h].pushPostfix(f),n[h].moveAllH2O()),n[u]=n[h],delete n[h],u}return n[e]=new t.node("",r),!0},cachingIt:function cachingIt(t){this.CC[t]++},moveH2O:function moveH2O(e){for(var r=0,i=0,n=this.C[e],s=this.I[e],h=0,o=0;o<this.CC.length;o++)this.CC[o]>t.CACHING_COUNTING||(s=this.I[h++],h==e&&(n=this.C[o]));for(;i<this.H.length;){var a=Number.parseInt(this.H[i]);if(this.H[i+1]==n){var l=this.pop_h(r);this.I.splice(r,1),this.add_O(l,s);break}i+=a+1,r++}this.CC[e]<=t.CACHING_COUNTING&&(this.CC[e]+=t.CACHING_COUNTING)},moveAllH2O:function moveAllH2O(){for(;0<this.H.length;)if(this.H[1]){var e=this.pop_h(0),r=this.I[0];this.I.splice(0,1),this.add_O(e,r)}this.H="",this.I=[],this.length_h=0;for(var i=0;i<this.CC.length;i++)this.CC[i]<t.CACHING_COUNTING&&(this.CC[i]+=t.CACHING_COUNTING)},select_H:function select_H(t){for(var e=0,r=0,i=this.H;r<i.length;)if(t.length==i[r]){for(var n=!0,s=r+1,h=0;h<t.length;h++,s++)if(t[h]!=i[s]){n=!1;break}if(n)return e;r+=t.length+1,e++}else r+=Number.parseInt(i[r])+1,e++;return-1},get_h:function get_h(t){var e=0,r=0;if(!this.H)return-1;for(;e<this.H.length;){if(t==r)return this.H.substr(e+1,this.H[e]);if(!this.H[e])return-1;e+=parseInt(this.H[e])+1,r++}return-1},pop_h:function pop_h(t){var e=0,r=0;if(!this.H)return-1;for(;e<this.H.length;){if(t==r){var i=this.H.substr(0,e),n=this.H.substr(e+1,this.H[e]),s=this.H.substr(e+parseInt(this.H[e])+1,this.H.length);return this.H=i+s,this.length_h--,n}if(!this.H[e])return-1;e+=parseInt(this.H[e])+1,r++}return-1},pushPostfixToH:function pushPostfixToH(t){if(this.length_h==this.length){for(var e=0,r=0,i="";e<this.length_h;){var n=parseInt(this.H[r]);if(r++,this.C=this.C.replace(this.H[r],t[0]),1==n)";"==this.H[r]?i+=(n=t.length)+""+t:i+=(n+=t.length)+""+t+this.H[r];else{var s=this.H.substr(r,n);i+=(n+=t.length)+""+t+s,r+=s.length}r++,e++}this.H=i}},pushPostfix:function pushPostfix(t){for(var e=0;e<this.O.length;e++)for(var r in this.O[e])r&&1==r.length&&";"==r[0]?this.O[e][t]=this.O[e][r]:this.O[e][t+r]=this.O[e][r],delete this.O[e][r];this.C=t[0];var i=0;for(e=0;e<this.CC.length;e++)i+=this.CC[e];this.CC.length=0,this.CC.push(i)},removePrefix:function removePrefix(t){if(this.length<this.BUCKET_START_POINT){var e=0;for(this.H=this.H.split("");e<this.H.length;){var r=parseInt(this.H[e]);if(r>=t.length){for(var i=!0,n=0;n<t.length;n++)this.H[e+1+n]!=t[n]&&(i=!1);if(i){this.H[e]=r-t.length;for(n=1;n<t.length;n++)delete this.H[e+n]}}e+=r+1}}},rank:function rank(t){}}},t.root=new this.node}return ChoiTrie.prototype={setRoot:function setRoot(t){var e=this;0===Object.keys(t).length&&t.constructor===Object?e.root=Object.assign(t,new e.node):e.root=t},makeRoot:function makeRoot(){var t=this,e=new t.node;return t.root=e,t.root},add:function add(t,e){var r=t,i=-1;do{if(this.addInternal(this.root,r,e),-1==(i=r.indexOf(" ")))break;r=r.substr(i+1,t.length)}while(r)},addInternal:function addInternal(t,e,r){var i=t,n=-1;if(e?n=i.add_C(e[0]):(e=";",-1==(n=i.select_c(";"))&&(i.C+=e)),i.CC[n]==this.CACHING_COUNTING&&i.moveH2O(n),i.CC[n]>=this.CACHING_COUNTING||e.length>9){i.CC[n]<this.CACHING_COUNTING&&(i.CC[n]=this.CACHING_COUNTING+1);var s=i.add_O(e,r);if(1!=s){var h=i.O[n][s];return this.addInternal(h,e.substr(s.length,e.length),r)}i.length++}else i.add_H(e,r),i.length++},search:function search(t){var e=this.root,r=[],i=t,n=(i.length,null),s=0,h=null,o=0;for(e.select_c(i[0]);-1!=(h=e.select_c(i[0]));){if(n=null,s=0,!(e.CC[h]>=this.CACHING_COUNTING)){var a=e.select_H(i);a>=0&&r.push(e.I[a]);break}var l=e.O[h];for(var u in s=1,l){var f=u.length>i.length?i.length:u.length;if(1==f){n=l[u];break}for(var c=1;c<f&&i[c]==u[c];c++)s<c+1&&(n=l[u],s=c+1)}if(!n)break;e=n,o++,s==f&&(0==(i=i.substr(f,i.length)).length&&(i=";"),0)}if(r.length>0||0==o)return r;var _=[],g=0;for(_.push(e);_.length!=g&&(e=_[g]);){if(e.I&&e.I.some(function(t){r.push(t)}),e.C)for(h=0;h<e.C.length;h++)if(e.CC[h]>=this.CACHING_COUNTING)for(var d in e.O[h])_.push(e.O[h][d]);g++}return r}},ChoiTrie}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Protogo=void 0;var i=r(0);e.Protogo=function(){function protogo(){this.P=this,this.MATCH_THRESHOLD=2,this.raw=null,this.fields={},this.engine=new i.ChoiTrie}return protogo.prototype={init:function init(t){return this.P.raw=t,this.P.fields={},this.add(t)},add:function add(t){var e=this;if(t.constructor===Array){var r=0,i={},n=[],s=[],h=(e.MATCH_THRESHOLD,Object.keys(t[0]));return h.some(function(h){var o,a;void 0!==e.P.fields[h]?(o=void 0===e.P.fields[h].root?{}:e.P.fields[h].root,a=void 0===e.P.fields[h].value_list?[]:e.P.fields[h].value_list):(o={},a=[]),n.push(h),i[h]=r,s.push(r);for(var l=t.length,u=0;u<l;u++){var f=t[u][h];a.push(f),e.addOnEngine(o,f,t[u])}e.P.fields[h]={idx:r,value_list:a,root:o,search:function search(t){return e.searchOnEngine(this.root,t)}},e.P[h]=e.P.fields[h],r++}),e.P.fields.names=n,e.P.fields.count=r,e.P.fields.get=function(t){return e.P.fields.names[t]},e.P.fields.order=s,e.P.fields}return null},search:function search(t){for(var e=[],r=0;r<this.fields.count;r++){var i=this.fields.order[r],n=this[this.fields.names[i]].search(t);if(n)for(var s=0;s<n.length;s++)e.push(n[s])}return e},addOnEngine:function addOnEngine(t,e,r){return this.engine?(this.engine.setRoot(t),this.engine.add(e,r)):this.addOnBasicTrie(t,e,r)},searchOnEngine:function searchOnEngine(t,e){return this.engine?(this.engine.setRoot(t),this.engine.search(e)):this.searchOnBasicTrie(t,e)},addOnBasicTrie:function addOnBasicTrie(t,e,r){var i=e;t[i[0]]||(t[i[0]]={});for(var n=t[i[0]],s=1;s<i.length;s++)if(n[i[s]]||(n[i[s]]={}),n=n[i[s]]," "==i[s-1]){t[i[s]]||(t[i[s]]={});for(var h=t[i[s]],o=s+1;o<i.length;o++)h[i[o]]?h=h[i[o]]:(h[i[o]]={},h=h[i[o]]);h.raw||(h.raw=[],h.raw.push(r))}n.raw||(n.raw=[]),n.raw.push(r)},searchOnBasicTrie:function searchOnBasicTrie(t,e){var r=[],i=t,n=2;this.MATCH_THRESHOLD&&(n=this.MATCH_THRESHOLD);for(var s=0,h=0;h<e.length&&i[e[h]];h++)i=i[e[h]],s++;if(s>=n){var o=0,a=0,l=[];for(var u in i)if("raw"==u)for(h=0;h<i[u].length;h++)r.push(i[u][h]);else l.push(i[u]),a++;for(o=0;o!=a;o++)for(var f in l[o])if("raw"!=f)l.push(l[o][f]),a++;else for(h=0;h<l[o].raw.length;h++)r.push(l[o].raw[h])}return r},compare:function compare(t,e){var r,i;t.length>e.length?(r=t,i=e):(r=e,i=t);for(var n=new Array(r.length+1),s=0;s<=r.length;s++)n[s]=new Array(i.length+1);for(s=0;s<r.length+1;s++)n[s][0]=s,i.length>=s&&(n[0][s]=s);for(s=1;s<r.length+1;s++)for(var h=1;h<i.length+1;h++)if(r[s-1]==i[h-1])n[s][h]=n[s-1][h-1];else{var o=n[s-1][h-1];n[s-1][h]>n[s][h-1]?o>n[s][h-1]&&(o=n[s][h-1]):o>n[s-1][h]&&(o=n[s-1][h]),n[s][h]=o+1}return n[r.length][i.length]},setOrder:function setOrder(t){this.fields.order=t},toString:function toString(){return JSON.stringify(this.fields)},toHash:function toHash(t){return t.charCodeAt()}},protogo}()}]);